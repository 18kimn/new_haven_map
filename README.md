# Counter Haven

A work-in-progress counter-cartography project on New Haven, racial capitalism, and cartography. Submitted by Amy Kim and Nathan Kim in Spring 2021 for ER&M300 at Yale University; hopefully something that [DataHaven](https://github.com/CT-Data-Haven) can publish by the end of the summer.

You can see a draft of the project at [https://counter-haven.info](https://counter-haven.info). Please contact [nathan.kim@yale.edu](nathan.kim@yale.edu) with any questions. 

### About the project

This is a set of six maps bound together by transitions and geographies. They are: 

1. **An intro animation of New Haven.** A blue "wave" spreads from the center, and colored streaks curl randomly around the map. The intent with this map is only to argue that mapping is often a creative, non-deterministic process documenting living spaces and dynamic processes. 
2. **A map of New Haven, colored by property values.** Zooming out aggregates to the block level (to conform to Mapbox's data restrictions). 
3. **Historical and current racial segregation.** Current data are used to show the proportion Black of each block in New Haven, and neighborhood redlining designations from the New Deal-era Homeowners' Loan Corporation (HOLC) appear when the mouse is moved across the screen. The intent with this map is to show that the patterns from 2) have deep historical and racial roots. 
4. **A map of New Haven properties, arranged in a grid by size.** What even is a map, anyhow? Does this count? While a traditional map offers a narrative by adding context to geographic features, this map does the opposite by removing features from their context. 
5. **Indigenous land.** It's wrong to discuss property values and ownership in New Haven today without recognizing the illegality and violence behind any such "ownership." Indigenous nations in Connecticut never gave up that land -- we try to highlight that through this map. 
6. **Yale's global financial connections.** Using research from Local 33 and the UnFarallon campaign of the early 2000s, as well as more recent student activist work, we plot Yale's global financial connections and implications to argue that New Haven is deeply connected to the world at large. 

Along with the main message that we should oppose Yale's unjust relationships with New Haven and the world, we also want to argue against any presupposed static perspectives on mapping. When they are images printed on paper or in a .PNG file, maps can give the impression of unquestioned objectivity. But in reality, someone made the map, someone made the data going into the map, someone will interpret the map -- all of these stages are political and social processes. We try to highlight that dynamism with interactivity and transitions. 

____

## Development notes

### Setup

To get started, clone this repository by downloading it or by running `git clone https://18kimn/new-haven-map.git`. Setup the associated node packages by navigating to the directory in a terminal and running `npm install`.[^1] 

To preview the site in a browser, run `npm run start`. A browser window at http://localhost:8080 should automatically open, but you can navigate there manually if it does not. Edits will automatically result in refreshes, but because of Webpack recompiling they currently take a while.[^2] 

### Directory structure

The most important folder for viewers and editors of this project is the `src` folder. This contains the JavaScript files used to run the website (start at `index.js` and then look to the `modules` folder), and also contains R scripts in the `preprocessing` folder that import and clean up data. Lastly, the `static` folder contains non-code assets that this website needs: the website icon, an `.mp4` file for the grid visualization of New Haven properties, and the data actually imported into the website and visualized there. 

You might also want to look in the `input_data` folder to see data files that are not used directly by the web application but are either raw data files or cleaned data files that have been uploaded to Mapbox Studio to improve runtime performance. 

The top level of the project contains files to help run the project; hopefully you can ignore these if you're just looking around or making smaller edits. `package.json` and `package-lock.json` are generated by `npm` with edits from myself, and contain inforrmation about packages so that a future user of this repository can reproduce my setup. `package.json` also contains some rules so that `npm run start` can deploy the application. `.eslintrc.js` contains configuration rules for [ESLint](https://eslint.org/), which enforces syntax and style rules. `webpack.config.js` has configurations for Webpack, `new_haven_map.Rproj` specifies to RStudio that this folder is an [R Project](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects), and the `.gitignore` specifies some excluded notes. I also have an `.env` file on my local computer that contains the Mapbox public access token for the map style used in this project; please email me if you'd like access to this to reproduce it on your computer.  

If you download and begin work on the project on your local machine, three new folders will appear, titled `.Rproj.user`, `dist`, and `node_modules`. These should for the most part not be touched; they are handled by `npm`, R, and Webpack. 


[^1]: Click [here](https://www.earthdatascience.org/workshops/intro-version-control-git/basic-git-commands/) for an intro to Git, a version control system, and [here](http://nodesource.com/blog/an-absolute-beginners-guide-to-using-npm/) for a guide to `npm`, or Node package manager. 

[^2]: I'm working on making this part easier :'). If you're new to Webpack (as I am), it's an application bundler that can help reduce file sizes, can implement hot reload (although this part is frustrating for me), and can work with transpilers to make your code work in any browser. Click [here](https://www.smashingmagazine.com/2017/02/a-detailed-introduction-to-webpack/) for more information. 